import{_ as s,o as r,c as a,ag as i}from"./chunks/framework.CpVu2XTb.js";const t="data:image/png;base64,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",n="/cours/assets/session-manager.DoMnt2VV.png",l="/cours/assets/terminate.CZ7Qr0-M.png",m=JSON.parse('{"title":"05 — Suppression simple (DROP)","description":"","frontmatter":{"title":"05 — Suppression simple (DROP)","aside":false},"headers":[],"relativePath":"modules/02-ddl-base/06-drop-simple.md","filePath":"modules/02-ddl-base/06-drop-simple.md"}'),o={name:"modules/02-ddl-base/06-drop-simple.md"};function d(p,e,c,u,A,b){return r(),a("div",null,[...e[0]||(e[0]=[i('<h1 id="_06-—-suppression-simple-drop" tabindex="-1">06 — Suppression simple (DROP) <a class="header-anchor" href="#_06-—-suppression-simple-drop" aria-label="Permalink to &quot;06 — Suppression simple (DROP)&quot;">​</a></h1><h2 id="objectif" tabindex="-1">Objectif <a class="header-anchor" href="#objectif" aria-label="Permalink to &quot;Objectif&quot;">​</a></h2><p>Comprendre comment <strong>supprimer une structure</strong> (table ou base de données) à l’aide du DDL, et prendre conscience du <strong>caractère irréversible</strong> de ces opérations.</p><hr><h2 id="le-role-de-drop" tabindex="-1">Le rôle de DROP <a class="header-anchor" href="#le-role-de-drop" aria-label="Permalink to &quot;Le rôle de DROP&quot;">​</a></h2><p>L’instruction <code>DROP</code> permet de :</p><ul><li>supprimer définitivement une <strong>table</strong></li><li>supprimer définitivement une <strong>base de données</strong></li></ul><div class="bg-yellow-50 border border-yellow-200 text-yellow-900 rounded-lg p-4"><strong>À retenir</strong><br><code>DROP</code> agit sur la <strong>structure</strong> de la base de données, pas sur les données une par une. </div><hr><h2 id="supprimer-une-table" tabindex="-1">Supprimer une table <a class="header-anchor" href="#supprimer-une-table" aria-label="Permalink to &quot;Supprimer une table&quot;">​</a></h2><h3 id="instruction-drop-table" tabindex="-1">Instruction DROP TABLE <a class="header-anchor" href="#instruction-drop-table" aria-label="Permalink to &quot;Instruction DROP TABLE&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nom_table;</span></span></code></pre></div><h3 id="exemple" tabindex="-1">Exemple <a class="header-anchor" href="#exemple" aria-label="Permalink to &quot;Exemple&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> inscription;</span></span></code></pre></div><div class="bg-red-50 border border-red-300 text-red-900 rounded-lg p-4"><strong>Attention</strong><br> La table est supprimée définitivement, ainsi que toutes les données qu’elle contient. </div><hr><h2 id="ordre-de-suppression-des-tables" tabindex="-1">Ordre de suppression des tables <a class="header-anchor" href="#ordre-de-suppression-des-tables" aria-label="Permalink to &quot;Ordre de suppression des tables&quot;">​</a></h2><p>Lorsqu’il y a des relations entre tables :</p><ul><li>une table contenant une <strong>clé étrangère</strong> dépend d’une autre table</li><li>PostgreSQL empêche la suppression d’une table encore référencée</li></ul><div class="bg-yellow-50 border border-yellow-200 text-yellow-900 rounded-lg p-4"><strong>Règle importante</strong><br> Supprimer d’abord les tables dépendantes (avec clés étrangères), puis les tables référencées. </div><h3 id="exemple-d-ordre-correct" tabindex="-1">Exemple d’ordre correct <a class="header-anchor" href="#exemple-d-ordre-correct" aria-label="Permalink to &quot;Exemple d’ordre correct&quot;">​</a></h3><ol><li>inscription (contient des clés étrangères)</li><li>participant</li><li>evenement</li></ol><hr><h2 id="supprimer-une-base-de-donnees" tabindex="-1">Supprimer une base de données <a class="header-anchor" href="#supprimer-une-base-de-donnees" aria-label="Permalink to &quot;Supprimer une base de données&quot;">​</a></h2><h3 id="instruction-drop-database" tabindex="-1">Instruction DROP DATABASE <a class="header-anchor" href="#instruction-drop-database" aria-label="Permalink to &quot;Instruction DROP DATABASE&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DATABASE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nom_base;</span></span></code></pre></div><h3 id="exemple-1" tabindex="-1">Exemple <a class="header-anchor" href="#exemple-1" aria-label="Permalink to &quot;Exemple&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DATABASE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> demo_evenements;</span></span></code></pre></div><div class="bg-red-50 border border-red-300 text-red-900 rounded-lg p-4"><strong>Danger</strong><br> La base de données complète est supprimée : tables, contraintes et données.<br> Aucune récupération n’est possible dans le cadre du cours. </div><hr><h2 id="cas-d-usage-typiques-dans-le-cours" tabindex="-1">Cas d’usage typiques dans le cours <a class="header-anchor" href="#cas-d-usage-typiques-dans-le-cours" aria-label="Permalink to &quot;Cas d’usage typiques dans le cours&quot;">​</a></h2><ul><li>corriger une erreur de structure importante (voir la démo plus bas)</li><li>nettoyer après des tests</li></ul><div class="bg-yellow-50 border border-yellow-200 text-yellow-900 rounded-lg p-4"><strong>Bonnes pratiques</strong><br><ul><li>Être certain de la base ou de la table ciblée avant d’exécuter un <code>DROP</code>.</li><li><strong>Avoir une copie du code SQL ayant servi à créer la base de données ainsi que les tables.</strong></li></ul></div><hr><h2 id="demo" tabindex="-1">Démo <a class="header-anchor" href="#demo" aria-label="Permalink to &quot;Démo&quot;">​</a></h2><p>Nous avons remarqué une erreur de structure dans une des tables de la démo précédente. Plus tard, nous verrons comme utiliser <code>ALTER</code> pour corriger cette erreur. Pour le moment (et le premier TP), nous voulons un script de création complet et parfait. Nous allons donc supprimer les tables et la base de données pour ensuite réexécuter notre script corrigé.</p><h3 id="etapes" tabindex="-1">Étapes <a class="header-anchor" href="#etapes" aria-label="Permalink to &quot;Étapes&quot;">​</a></h3><ul><li>Supprimer la table <code>inscription</code>.</li><li>Constater que les tables <code>participant</code> et <code>evenement</code> existent toujours.</li><li>Observer la disparition de la relation dans la visualisation du schéma.</li><li>Supprimer la bd</li><li>Application de la correction dans la structure (ex.: un nouveau champ prénom dans participant)</li><li>Réexécution du script complet.</li></ul><h2 id="astuce-—-terminer-les-sessions-actives-avec-le-session-manager-dbeaver" tabindex="-1">Astuce — Terminer les sessions actives avec le Session Manager (DBeaver) <a class="header-anchor" href="#astuce-—-terminer-les-sessions-actives-avec-le-session-manager-dbeaver" aria-label="Permalink to &quot;Astuce — Terminer les sessions actives avec le Session Manager (DBeaver)&quot;">​</a></h2><img src="'+t+'" alt="Erreur" class="img-bordered mb-5"><p>Lorsque PostgreSQL refuse de supprimer une base de données parce qu’elle est encore utilisée, il est possible de fermer les connexions actives directement dans DBeaver.</p><h3 id="etapes-1" tabindex="-1">Étapes <a class="header-anchor" href="#etapes-1" aria-label="Permalink to &quot;Étapes&quot;">​</a></h3><ul><li>Se connecter à une autre base (ex. <code>postgres</code>).</li><li>Dans l’arborescence, faire un clic droit sur la connexion PostgreSQL.</li><li>Choisir <strong>Outils → Session Manager</strong>.</li><li>Repérer les sessions associées à la base <code>demo_evenements</code>.</li><li>Sélectionner les sessions actives.</li><li>Cliquer sur <strong>Terminate</strong>.</li></ul><img src="'+n+'" alt="Session manager" class="img-bordered mb-5"><img src="'+l+'" alt="Terminate session" class="img-bordered mb-5"><div class="bg-yellow-50 border border-yellow-200 text-yellow-900 rounded-lg p-4 mb-5"> PostgreSQL exige qu’aucune session ne soit connectée à une base avant de permettre sa suppression. </div>',46)])])}const g=s(o,[["render",d]]);export{m as __pageData,g as default};
