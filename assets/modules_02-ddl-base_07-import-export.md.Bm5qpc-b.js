import{_ as s,c as a,o as i,ag as t}from"./chunks/framework.DX2MDgaT.js";const o="/cours/assets/backup.DXR5-Coc.png",r="/cours/assets/backup-tables.CzuoV3cc.png",l="/cours/assets/backup-options.Bzh1M5Zs.png",n="/cours/assets/import-command.CMzvliMy.png",v=JSON.parse('{"title":"06 — Import et export d’une base de données","description":"","frontmatter":{"title":"06 — Import et export d’une base de données","aside":false},"headers":[],"relativePath":"modules/02-ddl-base/07-import-export.md","filePath":"modules/02-ddl-base/07-import-export.md"}'),d={name:"modules/02-ddl-base/07-import-export.md"};function c(p,e,u,h,b,m){return i(),a("div",null,[...e[0]||(e[0]=[t('<h1 id="_07-—-import-et-export-d-une-base-de-donnees" tabindex="-1">07 — Import et export d’une base de données <a class="header-anchor" href="#_07-—-import-et-export-d-une-base-de-donnees" aria-label="Permalink to &quot;07 — Import et export d’une base de données&quot;">​</a></h1><h2 id="objectif" tabindex="-1">Objectif <a class="header-anchor" href="#objectif" aria-label="Permalink to &quot;Objectif&quot;">​</a></h2><p>Savoir <strong>exporter</strong> et <strong>importer une base de données complète</strong> à l’aide de DBeaver afin de :</p><ul><li>sauvegarder un travail</li><li>remettre un projet</li><li>recréer une base de données existante</li></ul><hr><h2 id="exporter-une-base-de-donnees-dbeaver" tabindex="-1">Exporter une base de données (DBeaver) <a class="header-anchor" href="#exporter-une-base-de-donnees-dbeaver" aria-label="Permalink to &quot;Exporter une base de données (DBeaver)&quot;">​</a></h2><p>Exporter une base de données permet de sauvegarder :</p><ul><li>la structure (tables, contraintes, clés)</li><li>les données</li></ul><h3 id="etapes-d-exportation" tabindex="-1">Étapes d&#39;exportation <a class="header-anchor" href="#etapes-d-exportation" aria-label="Permalink to &quot;Étapes d&#39;exportation&quot;">​</a></h3><ul><li>Clic-droit sur la <strong>base de données</strong> dans DBeaver.</li><li>Dans l&#39;option <code>Outils</code>, choisir <code>Backup</code></li><li>Cocher le schéma <code>Public</code> ainsi que toutes les tables + <code>Suivant</code></li><li>Utiliser le format <strong>Plain (SQL)</strong> dans la liste déroulante.</li><li>Choisir le <code>Encoding</code> en <code>UTF-8</code></li><li>Cocher <code>Add drop database statement</code> et <code>Add create database statement</code></li><li>Choisir et noter le <code>Output folder</code></li><li>Démarrage</li><li>Ouvir et valider le fichier <code>.sql</code> généré.</li></ul><div class="bg-yellow-50 border border-yellow-200 text-yellow-900 rounded-lg p-4 mb-5"><strong>À retenir</strong><br> Le fichier exporté doit être un fichier <code>.sql</code> lisible.<br> C&#39;est normal de ne pas comprendre toutes les instructions qui y sont contenues. </div><img src="'+o+'" alt="Backup" class="img-bordered mb-5"><img src="'+r+'" alt="Backup tables" class="img-bordered mb-5"><img src="'+l+'" alt="Backup options" class="img-bordered mb-5"><hr><h2 id="importer-une-base-de-donnees-ligne-de-commande" tabindex="-1">Importer une base de données (ligne de commande) <a class="header-anchor" href="#importer-une-base-de-donnees-ligne-de-commande" aria-label="Permalink to &quot;Importer une base de données (ligne de commande)&quot;">​</a></h2><p>Le fichier SQL généré à l’étape d’export contient déjà :</p><ul><li>la suppression de la base de données (DROP DATABASE)</li><li>la création de la base de données (CREATE DATABASE)</li><li>la création des tables, contraintes et données</li></ul><p>Il suffit donc <strong>d’exécuter le fichier SQL au complet</strong>. Cela doit être fait en ligne de commande, car le script contient des instructions lisibles uniquement par le programme <code>psql</code>.</p><div class="bg-yellow-50 border border-yellow-300 text-yellow-900 rounded-lg p-4"><strong>Avez-vous ajouté psql à votre PATH?</strong><br><p><a href="./../../labs/lab01-installations#ajouter-au-path">Ajouter psql au PATH</a></p></div><hr><h3 id="commande-a-utiliser" tabindex="-1">Commande à utiliser <a class="header-anchor" href="#commande-a-utiliser" aria-label="Permalink to &quot;Commande à utiliser&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chemin/vers/fichier.sql</span></span></code></pre></div><h3 id="exemple" tabindex="-1">Exemple <a class="header-anchor" href="#exemple" aria-label="Permalink to &quot;Exemple&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tp_evenements.sql</span></span></code></pre></div><h4 id="signification-des-options-utilisees-avec-psql" tabindex="-1">Signification des options utilisées avec psql <a class="header-anchor" href="#signification-des-options-utilisees-avec-psql" aria-label="Permalink to &quot;Signification des options utilisées avec psql&quot;">​</a></h4><ul><li><code>-U</code> : indique le <strong>nom de l’utilisateur PostgreSQL</strong> utilisé pour se connecter<br> (ex. <code>postgres</code>).</li><li><code>-f</code> : indique le <strong>fichier SQL à exécuter</strong>.</li></ul><div class="bg-red-50 border border-red-300 text-red-900 rounded-lg p-4 mb-5"><strong>Attention</strong><br> Le script supprime et recrée la base de données.<br> S’assurer que le fichier SQL correspond bien au travail à importer.<br> Encore une fois, toujours conserver une copie fonctionnelle des instructions que vous avez écrites pour votre travail. </div><img src="'+n+'" alt="Import" class="img-bordered mb-5"><hr><h2 id="demo" tabindex="-1">Démo <a class="header-anchor" href="#demo" aria-label="Permalink to &quot;Démo&quot;">​</a></h2><ul><li>Exporter une base de données avec DBeaver (format Plain).</li><li>Repérer le fichier <code>.sql</code> généré.</li><li>Exécuter le fichier avec <code>psql</code>.</li><li>Vérifier que la base de données, les tables et les relations sont recréées.</li></ul><div class="bg-yellow-50 border border-yellow-200 text-yellow-900 rounded-lg p-4"> Si vous voulez être vraiment certain que ça fonctionne, supprimez manuellement votre base de données dans DBeaver avant l&#39;exécution de la commande. </div><hr><h2 id="a-retenir" tabindex="-1">À retenir <a class="header-anchor" href="#a-retenir" aria-label="Permalink to &quot;À retenir&quot;">​</a></h2><div class="bg-yellow-50 border border-yellow-200 text-yellow-900 rounded-lg p-4"><ul class="list-disc pl-5"><li>Exporter = sauvegarder une base de données</li><li>Importer = recréer une base de données</li><li>Le format utilisé est toujours <strong>Plain (SQL)</strong></li><li>Tout se fait avec l’outil graphique DBeaver</li></ul></div>',36)])])}const k=s(d,[["render",c]]);export{v as __pageData,k as default};
